4.1.8

///////////////////////////////////////////////////////////////////////////////////////////////////////////
// +---------------------------------------------------------------------------------------------------+ //
// + Release Notes
// +---------------------------------------------------------------------------------------------------+ //
///////////////////////////////////////////////////////////////////////////////////////////////////////////
CHG: 変更内容 / BUG: バグフィックス / NEW: 機能追加


[2023-04-14] OptionalLink-4.1.8
- BUG: fix #8 PHP8系に対応
- BUG: fix #10 nolinkの不具合を改善

[2023-01-30] OptionalLink-4.1.7
- BUG: fix #4 オプショナルリンクを設定していないブログで記事を更新するとオプショナルリンクのデータが増殖する問題の改善

[2022-09-01] OptionalLink-4.1.6
- BUG: PHP8でエラーになる箇所の改善

[2022-08-26] OptionalLink-4.1.5
- BUG: ファイルリンクを設定したがファイルデータがない場合の挙動を改善

[2022-02-02] OptionalLink-4.1.4
- BUG: baserCMS4.6.0のBcUploadBehaviorに対応

[2022-02-02] OptionalLink-4.1.3
- BUG: リンクが正しく適用されない問題の改善

[2022-02-02] OptionalLink-4.1.2
- BUG: 別タブで開くを胃底した場合rel="noopener noreferrer"属性・要素を付与するよう変更
- BUG: READMEに実装例を追加

[2021-12-13] OptionalLink-4.1.1
- BUG: 画像とPDFをアップロードし閲覧する場合以外のみheaderにattachmentを追加

[2021-12-13] OptionalLink-4.1.0
- CHG: ファイル拡張子制限 対象拡張子調整
- CHG: README InstallationにConfigファイルにて調整可能な旨、追記

[2021-09-18] OptionalLink-4.0.0
- NEW: ファイル拡張子制限追加

[2019-07-19] OptionalLink-4.0.0
- CHG: 新管理画面対応

[2019-07-19] OptionalLink-3.0.8
- GUG: OptionalLinkを利用しないブログの記事を編集すると、レコードが増えていってしまう問題を解決

[2019-05-25] OptionalLink-3.0.7
- BUG: 一度「リンクなし」で保存したことのある記事を「URL（指定あり）」で保存すると「リンクなし」で保存されてしまう問題を修正

[2019-03-03] OptionalLink-3.0.6
- CHG: リンクなし設定が、URL指定を選択→リンクなし設定と2段階の操作が必要なため、ラジオ選択による1段階で指定可能とするため
- CHG: 記事URLが有効であることを判定するメソッドを追加

[2018-12-13] OptionalLink-3.0.5
- CHG: PHP7.2対応

[2018-09-26] OptionalLink-3.0.4
- NEW: 記事に「ファイル、URL」を設定すると、ブログ記事詳細編集領域が隠れ、プレビューボタンが利用不可となる
- CHG: CHECK.mdに「ファイル指定、URL指定」について動作検証項目を追加

[2018-08-25] OptionalLink-3.0.3
- CHG: オプショナルリンクのファイルアップロード機能にて公開期間を指定していると同一ファイル名をアップロードした際に上書きしてしまう問題があるため、保存されるファイル名を変更
    - ファイル名はIDをベースとした連番生成に変更
- CHG: CHECK.mdに「ファイル指定」についてより詳細に動作検証項目を追加作成
- CHG: アイコン画像＋「新規追加」文字表示となるよう調整
- BUG: ブログ記事の一括削除時（オプショナルリンクデータ削除時）、先にファイル公開期限が設定された記事の削除が実行された場合、ファイルパス指定がlimitedのままとなり、次のファイル公開期限指定がない場合、ファイルが正しく削除されない問題を修正
- BUG: ブログ記事削除時（オプショナルリンクデータ削除時）、公開期限が設定されてlimited配下に在るファイルが削除されないため
- BUG: OptionalLinkモデルのbeforeSaveをafterSaveへ変更
    - 保存されるファイル名のフォーマットを指定すると、公開期間を指定した場合にファイルが保存されない場合がある
    - オプショナルリンクのファイルを設定しない記事を作成後、公開期限ありのファイルをアップすると発生する点を

[2018-01-06] OptionalLink-3.0.2
- NEW: ModelEventにSearchIndicesのaftersave追加。ブログ記事がURL設定 or ファイルリンク設定 or リンクナシ設定の場合、検索コンテンツから削除するため
- CHG: README「CU確認済バージョン」にbaserCMSバージョンを追加
- CHG: #2 READMEに「CU確認済バージョン」と「影響Model」を追記するため。CHECK.mdを追加

[2018-01-06] OptionalLink-3.0.1
- CHG: copyrightをcatchupに変更。整形。不要ファイル（docs）削除
- CHG: ブログ記事が、URL設定 or ファイルリンクの場合、検索コンテンツに登録しない仕様とする
- CHG: ログイン処理判定を baserコアの仕組みを利用するように調整
- CHG: イベント Blog.Blog.beforeGetPostLink を利用する仕様に変更
- CHG: Form.afterEnd で、ブログ設定編集画面に表示していた オプショナルリンク設定 リンク表示を廃止
- BUG: getPostUrl() 利用時、Undefinedが発生する点を修正
- BUG: サブサイト利用時に同名のブログが判別つかない為、サイト名をあわせて表示
- BUG: シェル実行時にactionにて判別がつかない件を修正
- BUG: ブログ設定編集画面で、基本項目のタブ表示がなされなくなっている点を修正
- BUG: アップロードしたファイルへのリンクが、正常に機能しないことがある点を修正
- BUG: ブログ記事操作時、対象ブログ記事に紐付いたオプショナルリンクモデルオブジェクトとは別のオブジェクトを参照している動作を調整
- BUG: 検索コンテンツで、ウィジェットエリア内に、ブログの最新記事を表示するウィジェットが存在する場合にエラーが出るため調整
- BUG: ブログ設定編集画面で、基本項目のタブ表示がなされなくなっている点を修正
- BUG: サブフォルダ設置時にファイルへのリンクが正しく出力されない件を修正

[2017-02-07] OptionalLink-3.0.0
- CHG: baserCMS4対応版リリース

[2017-02-01] OptionalLink-2.4.8
- BUG: OptionalLinkHelperEventListener getBlogPostData の処理のチューニング

[2016-12-16] OptionalLink-2.4.7
- BUG: 記事数が多い時にメモリ消費量が多いので処理をチューニング（不要モデルをunbindしています） from sakaguchi

[2016-10-05] OptionalLink-2.4.6
- BUG: ブログ記事用のデータキャッシュが大量に生成されてしまう問題を修正
- BUG: ブログ記事削除の際、500 エラーが出る問題を改修

[2016-08-07] OptionalLink-2.4.5
- CHG: URLからの記事特定時、全ブログ記事のデータを保持した中から走査して特定する仕様に調整
- CHG: URL書換え処理をリファクタ
- CHG: README改訂
- BUG: 複数の記事に同一ファイル名のファイル設定がなされている場合、1記事のファイルを削除した場合、他の記事でファイルリンクの404が発生する
- BUG: ブログコピー時にコピー元リンクが関連付けから外れる問題を解決 from gondoh
- BUG: 記事追加画面を開いた際に、画面がカクッとなるため調整
- NEW: プラグイン専用ログ設定
- NEW: ブログ記事詳細へのアクセス時、リダイレクトが機能した場合の原因をログに取るように調整

[2016-06-18] OptionalLink-2.4.4
- CHG: プロパティにしていた処理対象コントローラ、アクションを廃止
- BUG: 記事にファイルタイプを設定している際に、ブログ記事URLに直接アクセスした場合、ファイルにリダイレクトしない動作を修正
- NEW: URL、ファイルに入力値がある場合、選択ラベルに入力値が存在することを示す
- NEW: リンクURLとターゲットを個別に返すヘルパー追加 Merge pull request #14 from ichi280/dev-request

[2016-02-07] OptionalLink-2.4.3
- BUG: 不要なconsole.logを削除
- CHG: イベント処理をリファクタ
- CHG: インデックスを追加。optional_links テーブルにインデックスを貼るように変更: Merge from gondoh

[2015-08-13] OptionalLink-2.4.2
- BUG: アクセス修飾子追加
- CHG: 基底classにadd追加
- CHG: OptionalLinkデータのsave動作をリファクタ
- NEW: #11 記事リンクの設定がある場合の記事詳細URLにアクセスした場合、設定URLにリダイレクトする

[2015-06-21] OptionalLink-2.4.1
- BUG: blogPostsでのファイルリンク時、サムネイル側へのリンクとなってしまう点を修正
- CHG: README改訂

[2015-06-21] OptionalLink-2.4.0
- BUG: URLの書換えを実行する際の判定値として、URLがブログ記事詳細である判定値を利用していたため、URL書換を機能させるかどうかの判定値を利用するように修正
- BUG: 公開期間指定を「公開期間クリア」ボタンから空にした場合、正常にクリアされない点を改修
- BUG: URL書換えを実施する場合、ステータス値に関わらずリンクオプションを書換えている箇所があったため修正
- BUG: ブログ設定画面で表示していたオプショナルリンク設定へのリンクが消えていた点を修正
- BUG: オプショナルリンクが有効なブログと無効なブログが混在してTOPなどの新着がある時に、設定値が引き継がれてしまう不具合の対応: Merge pull request #10 from kaburk/dev-3-request
- CHG: README改訂
- CHG: 設定データ、リンクデータありきの仕様となっている点を見直し、データがない場合は処理を行わない方向性の処理にリファクタ
- CHG: インストール時のデータ作成機能を削除
- CHG: URL文字列からの拡張子判定を共通処理化
- CHG: Helper内のファイルパス取得を修正
- CHG: URL書換えの実施判定をメソッド化
- CHG: ブログコンテンツ保存時のイベント処理を削除
- CHG: 設定データ、リンクデータの判定処理を削除
- CHG: 基底コントローラの読込を調整
- CHG: プラグイン追加時にお気に入りメニューに追加される名称を変更
- CHG: 処理対象コントローラ、アクション名を調整
- CHG: ブログのajax_copy時、コピー元データがない時オプショナルリンク設定は「利用しない」となるように変更
- CHG: イベント処理をリファクタ
- NEW: configs テーブル変更に伴いアップデータ作成
- NEW: ファイルアップロードに必要なフォルダ、ファイルの存在チェック機能
- NEW: アップロードファイル用フォルダチェック、作成機能
- NEW: オプショナルリンク設定を追加する機能

[2015-05-03] OptionalLink-2.3.2
- BUG: リンクURLの書換え判定処理をリファクタ
- BUG: アップロード画像表示のサイズ調整に失敗することがあるため、予防策としてcss追加
- BUG: #8 画像ファイルをアップロードした場合、管理側での画像表示が大きすぎる場合、小さくして表示するようにした
- BUG: #8 画像ファイル上げた際に、フロント側のリンクがサムネイルになってしまう点を調整
- CHG: #8 pdf以外のファイルもアップロードできるように変更
- NEW: 公開期間クリアボタンを追加

[2015-05-02] OptionalLink-2.3.1
- BUG: #9 ファイルの公開期間に指定がある場合、期間外の公開中記事は、タイトルのリンクなしテキストとする
- NEW: BcCacheの利用
- BUG: Undefined が発生する点を改修

[2015-03-07] OptionalLink-2.3.0
- BUG: config 記載のプラグイン名を変更
- NEW: 2.3.0アップデート用スクリプト
- BUG: ignore にdoxigenを追加
- BUG: README改定 Merge branch 'gitter-badge' of git://github.com/gitter-badger/optional_link into gitter-badger-gitter-badge
- BUG: 期間指定により閲覧不可ファイルにアクセスした際に、管理側URLに移ってしまう点を改修
- NEW: ファイルの公開期間制限に必要なフォルダ、ファイルの生成機能を追加
- BUG: ファイルを送らない場合にUndefinedが発生していた点を修正
- BUG: ファイルの削除チェックに指定を入れた場合、エラーで処理が止まる点を仮修正
- BUG: オプショナルリンクのデータ保存前に、公開期間指定がある場合は limited へ移動する機能を追加 - 公開期間指定がある場合、削除前に保存場所のパスを limited を考慮して書換える
- BUG: リンク種別判定をステータス別判定に変更。 - ファイルリンク出力メソッドを追加
- BUG: 管理側表示文言を調整
- BUG: アップロードファイルへのアクセス時、URLからファイルの公開期間を判定する機能を追加 - Routingを利用してControllerで判定する
- BUG: インストール時に公開期間指定ファイル用のフォルダと制限用htaccessを生成
- NEW: Helperに新着記事表示で利用できるメソッドを追加
- BUG: Undefined が発生する点を改修
- BUG: 登録ファイルリンクが反映されるように改修
- BUG: フォームを開いた際のリンクなし状態が反映されない点を改修
- BUG: システムメニューからリンク一覧へのリンクを削除
- NEW: ファイルアップロード機能追加
- BUG: 選択ステータスによるフォーム内容表示切替えを実装
- BUG: ブログ設定に表示するオプショナルリンク設定表示を調整、コードリファクタ
- BUG: オプショナルリンクのデータ一覧へのリンクを削除 - ブログ記事画面のみで扱う方針に変更したため
- BUG: インストール時のデータ作成内容を調整
- BUG: ブログ設定の追加保存時のみ設定情報を保存する仕様に変更
- CHG: ブログ設定画面では、設定編集へのリンクを表示する仕様に変更
- CHG: 保存するデータ生成処理をリファクタリング
- CHG: privateメソッドを拡張化対応するためpublic化
- CHG: Merge pull request #6 from gondoh/dev-3 ブログコピー時に２重に登録されないよう、プチカスタムを参照してコード対策

[2014-09-07] OptionalLink-2.2.3
- BUG: 「リンクなし」チェックが選択できなくなっている点を改修
- CHG: 設定ファイルを3系仕様に合わせて変更
- CHG: システムメニューの表示内容から一括設定を削除
- BUG: リンク指定文字列を書き換えたあとに「利用しない」に切り替えて保存しても、入力文字列が保存されない点を改修 #5
- BUG: URL文字列が入力されている状態で「利用しない」を指定しても、指定文字列でのリンクが有効のままになる点を改修 #4
- BUG: ブログ記事コピー時に、コピー元データを書き換えてしまう問題を改修 clear ブログ記事保存時とブログコンテンツ保存時の処理を分割
- CHG: 一括設定メニューは、ブログコンテンツ数とブログ記事数が不足している場合に表示するように変更
インストール時のデータ生成の仕様変更に対応
- BUG: 「別窓で開く」の表現を「別ウィンドウ（タブ）」に変更 #3

[2014-05-25] OptionalLink-2.2.2
- BUG: オプショナルリンク設定を blog_content_id から正しく読み込んでない点を修正
- BUG: ブログ設定編集時にオプショナルリンク設定データが更新されない点を修正
- BUG: ブログ追加時に未定の blog_content_id が beforeValidate で判定されて、ブログ設定が保存されなくなっていた点を修正

[2014-05-24] OptionalLink-2.2.1
- BUG: ブログ設定画面にオプショナルリンク設定データが反映されない点を修正

[2014-04-12] OptionalLink-2.2.0
- CHG: baserCMS 3.0.2 よりヘルパーのイベントは、プラグイン名でフィルタリングできない仕様になる為調整
- BUG: PostgreSQLで not nulle 制約エラーが出るためスキーマファイル内容を変更
- CHG: システム管理グループのユーザーでログイン中のみ、システムナビにメニューを表示するように変更

[2014-04-12] OptionalLink-2.1.1
- CHG: jsでリンク設定時の動作を調整するようにした（jsを外部ファイル化）

[2014-04-12] OptionalLink-2.1.0
- NEW: リンクしない機能を追加
- NEW: りんくなしの検索指定を追加
- CHG: フィールド追加・変更に対応
- BUG: インストール時環境によってエラーとなる点を修正
- BUG: オプショナルリンク用のフォームが出て来なくなる点を修正（コアの改修に対応）
- CHG: 管理システム側のフォントが変わったため、文字カウンターが改行されて表示される点を変更
- NEW: Feed出力時のURLにオプショナルリンクの内容を反映

[2013-12-31] OptionalLink-2.0.0
- CHG: baserCMS 3.0.0 対応版リリース

[2013-11-25] optional_link-1.0.0
- NEW: 初版リリース
